<!DOCTYPE html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
	<title>Investment</title>
		<link rel="stylesheet" href="/css/default.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<div id="header">
	<h1>
		<a href="/" id="backButton"><</a>
		<span>$</span>av<img src="/images/thumb.png">nUp
	</h1>
</div>

<div>
<ul id="navbar">
	<a class="active" href="/"><img src="http://www.iconsdb.com/icons/preview/white/home-5-xxl.png"></a>
	<a href="/chatbot"><img src="http://www.iconsdb.com/icons/preview/white/speech-bubble-2-xxl.png"></a>
</ul>
</div>

<div id="investments" class="summary">
	<table id="investmentSummary">

		<tr id="lengthyHeader">
			<th class="investmentName">Name</th>
			<th class="investmentQuantity">Quantity</th>
			<th class="investmentPrice">Current Price</th>
			<th class="investmentTotal">Total</th>
		</tr>

		<tr id="shorterHeader">
			<th class="investmentName">Name</th>
			<th class="investmentQuantity">Qty</th>
			<th class="investmentPrice">Price</th>
			<th class="investmentTotal">Total</th>
		</tr>
		
		<!--Stuff will be inserted here-->
		
	</table>
	<br></br><br></br><h2>You have earned ${{investmentEarnings}} from your investments!</h2>
</div>

<div id="investmentsList">
	<h2>Your investment holdings:</h2>
	<ol id="holdingsList"><!--Stuff will be inserted here--></ol>
</div>
<!--
<div id="stockSearch">
	<h2>Search for stocks:</h2>
	<form action="/submitStockSearch" method="post" enctype="multipart/form-data" id="formSearchBox">
		<input type="text" name="user_msg" id="formUserInp">
		<input type="submit" value="Submit" id="formSubBut">
	</form>
</div>
-->
<a class="additionalCrapAtTheBottom" href="/chatbot">
	<h2> + Find something to invest in! </h2>
</a>

</body>





<script src="canvasjs.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
	
//add investments to table	
var investments = {{investmentsArray|safe}}, i, investmentsList="", holdingsList="";

for (i = 0; i < investments.length; i++){
	investmentsList += "<tr><td>"+investments[i][0]+"</td><td>"+investments[i][1]+"</td><td>"+investments[i][2]+ "</td><td>"+investments[i][3]+"</td></tr>";
	
	holdingsList += "<li><a href='#stock_data'><span class='stockName'>" +investments[i][4]+ "<br /></span><span class='stockSymbol'>(" +investments[i][0]+")</span><span class='stockPrice'>"+investments[i][2]+"<br /><span class='stockPriceChange'>"+investments[i][5]+"</span></span></div></a></li>";
}
document.getElementById("investmentSummary").innerHTML += investmentsList;
document.getElementById("holdingsList").innerHTML = holdingsList;

//change color of prices
var stockPriceChanges = document.getElementsByClassName("stockPriceChange");
var priceChange = "", indexOfMinus = 0;
for (i = 0; i < stockPriceChanges.length; i++){
	priceChange = stockPriceChanges[i].innerHTML;
	if (priceChange.substr(0,1) === "-"){
		stockPriceChanges[i].style.color = "#ff3239";
	}else{
		stockPriceChanges[i].style.color = "#099c39";
		stockPriceChanges[i].innerHTML = "+"+stockPriceChanges[i].innerHTML;
	}
}

</script>